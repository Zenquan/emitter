function emitter(){this.events={},this._maxListeners=null}var proto=emitter.prototype;proto.on=proto.addListener=function(e,t){this.events[e]?(this._maxListeners!=0>this.events[e].length>this._maxListeners&&console.error(` MaxListenersExceededWarning: Possible EventEmitter memory leak detected. ${this.events[e].length-this._maxListeners} 响 listeners added. Use emitter.setMaxListeners() to increase limit`),this.events[e].push(t)):this.events[e]=[t]},proto.once=function(e,t){let s=(...i)=>{t.apply(this,i),this.removeListener(e,s)};this.on(e,s)},proto.setMaxListeners=function(e){this._maxListeners=e},proto.listeners=function(e){return this.events[e]},proto.removeListener=function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(e=>e!=t))},proto.removeAllListener=function(e){delete this.events[e]},proto.emit=function(e,...t){this.events[e]&&this.events[e].forEach(e=>e.apply(this,t))},module.exports=emitter;